{% extends "user.html" %}
{% load custom_filters %}

{% block title %} {{ learning_module.name }} {% endblock %}

{% block pagetitle %} {{ learning_module.name }} {% endblock %}

{% block usersidebar %}
<br><br><br>
<center><h3>Module List</h3></center>
<ul class="list">
{% for unit in learning_units %}
<span>
<li>
{% if unit.learning_type == "quiz" %}
    <a href="{{ URL_ROOT }}/exam/start/{{unit.quiz.questionpaper_set.get.id}}/{{learning_module.id}}/{{course.id}}">
    {{ unit.quiz.description }}</a>
{% else %}
    <a href="{{ URL_ROOT }}/exam/show_video/{{unit.lesson.id}}/{{learning_module.id}}/{{course.id}}">
    {{ unit.lesson.name }}</a>
{% endif %}

{% get_unit_status course learning_module unit user as status %}
{% if status == "completed" %}
    <span class="label label-info">{{status}}</span>
{% else %}
    <span class="label label-warning">{{status}}</span>
{% endif %}
</li>
</span>
<br>
{% endfor %}
</ul>
{% endblock %}

{% block main %}
{% if state == "module" %}
<div class="panel panel-default">
    <div class="panel-body">
        {{learning_module.html_data|safe}}
    </div>
</div>
<div style="text-align: center;">
    <a href="{{ URL_ROOT }}/exam/next_unit/{{course.id}}/{{learning_module.id}}/{{first_unit.id}}/1" class="btn btn-primary">Next Unit
        <span class="glyphicon glyphicon-chevron-right">
        </span>
    </a>
</div>
{% else %}
<center><h3>{{lesson.name}}</h3></center>
<div class="panel panel-default">
    <div class="panel-body">
        {{lesson.html_data|safe}}
    </div>
</div>
<div style="text-align: center;">
    <a href="{{ URL_ROOT }}/exam/next_unit/{{course.id}}/{{learning_module.id}}/{{current_unit.id}}" class="btn btn-primary" style="display: inline-block;">Next Unit
        <span class="glyphicon glyphicon-chevron-right">
        </span>
    </a>
</div>
{% endif %}
{% endblock %}